(self["webpackChunknotes"]=self["webpackChunknotes"]||[]).push([[180],{2425:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>le});r(71);var l=r(3673),i=r(2323),a=r(8880);const s={class:"q-mx-xs"},o=(0,l.Uk)("Écrire en gras"),n=(0,l.Uk)("Écrire en italique"),d=(0,l.Uk)("Souligner du texte"),c={class:"q-mx-xs"},m=(0,l.Uk)("Insérer un type de texte"),p=(0,l.Uk)("Titre 1"),u=(0,l.Uk)("Titre 2"),w=(0,l.Uk)("Titre 3"),f=(0,l.Uk)("Titre 4"),k=(0,l.Uk)("Titre 5"),x=(0,l.Uk)("Titre 6"),h=(0,l.Uk)("Insérer un tableau"),g={class:"flex row justify-center items-center q-pa-sm"},y=(0,l._)("div",{class:"q-mx-sm"},"×",-1),_=(0,l.Uk)(" Le format n'est pas valide "),b=(0,l.Uk)("Insérer un bloc de code"),S=(0,l.Uk)("Insérer une citation"),v={class:"q-mx-xs"},C=(0,l.Uk)("Copier"),W=(0,l.Uk)("Télécharger le fichier"),A={class:"q-mx-xs"},q=(0,l.Uk)("Télécharger au format PDF"),T=(0,l.Uk)("Télécharger au format HTML");function z(e,t,r,z,$,M){const U=(0,l.up)("q-tooltip"),Z=(0,l.up)("q-btn"),j=(0,l.up)("q-separator"),D=(0,l.up)("q-item-label"),N=(0,l.up)("q-item-section"),Q=(0,l.up)("q-item"),V=(0,l.up)("q-list"),F=(0,l.up)("q-btn-dropdown"),H=(0,l.up)("q-markdown"),L=(0,l.up)("q-scroll-area"),I=(0,l.up)("q-splitter"),K=(0,l.up)("q-page"),P=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.j4)(K,{class:"flex column"},{default:(0,l.w5)((()=>[(0,l._)("div",{class:(0,i.C_)(["full-width flex row items-center q-py-xs q-px-sm",e.$q.dark.isActive?"bg-grey-10":"bg-grey-2"]),style:{height:"5vh"}},[(0,l._)("div",s,[(0,l.Wm)(Z,{flat:"",size:"sm",padding:"xs",icon:"format_bold",onClick:t[0]||(t[0]=t=>e.formatSelectionDouble("**"))},{default:(0,l.w5)((()=>[(0,l.Wm)(U,{class:"text-no-wrap"},{default:(0,l.w5)((()=>[o])),_:1})])),_:1}),(0,l.Wm)(Z,{flat:"",size:"sm",padding:"xs",icon:"format_italic",onClick:t[1]||(t[1]=t=>e.formatSelectionDouble("_"))},{default:(0,l.w5)((()=>[(0,l.Wm)(U,{class:"text-no-wrap"},{default:(0,l.w5)((()=>[n])),_:1})])),_:1}),(0,l.Wm)(Z,{flat:"",size:"sm",padding:"xs",icon:"format_underline",onClick:t[2]||(t[2]=t=>e.formatSelectionDouble("~~"))},{default:(0,l.w5)((()=>[(0,l.Wm)(U,{class:"text-no-wrap"},{default:(0,l.w5)((()=>[d])),_:1})])),_:1})]),(0,l.Wm)(j,{vertical:"",class:"q-mx-xs",style:{width:"0.5px"}}),(0,l._)("div",c,[(0,l.Wm)(F,{flat:"",size:"sm",padding:"xs",icon:"format_size","no-caps":"","auto-close":""},{label:(0,l.w5)((()=>[(0,l.Wm)(U,{class:"text-no-wrap"},{default:(0,l.w5)((()=>[m])),_:1})])),default:(0,l.w5)((()=>[(0,l.Wm)(V,{class:"text-no-wrap"},{default:(0,l.w5)((()=>[(0,l.wy)(((0,l.wg)(),(0,l.j4)(Q,{clickable:"",onClick:t[3]||(t[3]=t=>e.formatSelectionSimple("#"))},{default:(0,l.w5)((()=>[(0,l.Wm)(N,null,{default:(0,l.w5)((()=>[(0,l.Wm)(D,{class:"text-h3"},{default:(0,l.w5)((()=>[p])),_:1})])),_:1})])),_:1})),[[P]]),(0,l.wy)(((0,l.wg)(),(0,l.j4)(Q,{clickable:"",onClick:t[4]||(t[4]=t=>e.formatSelectionSimple("##"))},{default:(0,l.w5)((()=>[(0,l.Wm)(N,null,{default:(0,l.w5)((()=>[(0,l.Wm)(D,{class:"text-h4"},{default:(0,l.w5)((()=>[u])),_:1})])),_:1})])),_:1})),[[P]]),(0,l.wy)(((0,l.wg)(),(0,l.j4)(Q,{clickable:"",onClick:t[5]||(t[5]=t=>e.formatSelectionSimple("###"))},{default:(0,l.w5)((()=>[(0,l.Wm)(N,null,{default:(0,l.w5)((()=>[(0,l.Wm)(D,{class:"text-h5"},{default:(0,l.w5)((()=>[w])),_:1})])),_:1})])),_:1})),[[P]]),(0,l.wy)(((0,l.wg)(),(0,l.j4)(Q,{clickable:"",onClick:t[6]||(t[6]=t=>e.formatSelectionSimple("####"))},{default:(0,l.w5)((()=>[(0,l.Wm)(N,null,{default:(0,l.w5)((()=>[(0,l.Wm)(D,{class:"text-h6"},{default:(0,l.w5)((()=>[f])),_:1})])),_:1})])),_:1})),[[P]]),(0,l.wy)(((0,l.wg)(),(0,l.j4)(Q,{clickable:"",onClick:t[7]||(t[7]=t=>e.formatSelectionSimple("#####"))},{default:(0,l.w5)((()=>[(0,l.Wm)(N,null,{default:(0,l.w5)((()=>[(0,l.Wm)(D,{class:"text-subtitle2"},{default:(0,l.w5)((()=>[k])),_:1})])),_:1})])),_:1})),[[P]]),(0,l.wy)(((0,l.wg)(),(0,l.j4)(Q,{clickable:"",onClick:t[8]||(t[8]=t=>e.formatSelectionSimple("######"))},{default:(0,l.w5)((()=>[(0,l.Wm)(N,null,{default:(0,l.w5)((()=>[(0,l.Wm)(D,{class:"text-caption"},{default:(0,l.w5)((()=>[x])),_:1})])),_:1})])),_:1})),[[P]])])),_:1})])),_:1}),(0,l.Wm)(F,{flat:"",size:"xs",style:{padding:"6px"},icon:"grid_on",class:"without-dropdown-icon","no-caps":""},{label:(0,l.w5)((()=>[(0,l.Wm)(U,{class:"text-no-wrap"},{default:(0,l.w5)((()=>[h])),_:1})])),default:(0,l.w5)((()=>[(0,l._)("div",g,[(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[9]||(t[9]=t=>e.insertArraySize.x=t),maxlength:"2",class:(0,i.C_)("rounded-borders no-border text-center "+(e.$q.dark.isActive?"bg-dark text-white":"bg-grey-2 text-black")),style:{width:"25px"},onKeydown:t[10]||(t[10]=(0,a.D2)(((...t)=>e.insertArray&&e.insertArray(...t)),["enter"]))},null,34),[[a.nr,e.insertArraySize.x]]),y,(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[11]||(t[11]=t=>e.insertArraySize.y=t),maxlength:"2",class:(0,i.C_)("rounded-borders no-border text-center "+(e.$q.dark.isActive?"bg-dark text-white":"bg-grey-2 text-black")),style:{width:"25px"},onKeydown:t[12]||(t[12]=(0,a.D2)(((...t)=>e.insertArray&&e.insertArray(...t)),["enter"]))},null,34),[[a.nr,e.insertArraySize.y]])]),(0,l.Wm)(U,{"model-value":!e.validateArraySize,"no-parent-event":"",self:"center middle"},{default:(0,l.w5)((()=>[_])),_:1},8,["model-value"])])),_:1}),(0,l.Wm)(Z,{flat:"",size:"sm",padding:"xs",icon:"code",onClick:t[13]||(t[13]=t=>e.formatSelectionDouble("\n```\n"))},{default:(0,l.w5)((()=>[(0,l.Wm)(U,{class:"text-no-wrap"},{default:(0,l.w5)((()=>[b])),_:1})])),_:1}),(0,l.Wm)(Z,{flat:"",size:"sm",padding:"xs",icon:"format_quote",onClick:t[14]||(t[14]=t=>e.formatSelectionSimple(">"))},{default:(0,l.w5)((()=>[(0,l.Wm)(U,{class:"text-no-wrap"},{default:(0,l.w5)((()=>[S])),_:1})])),_:1})]),(0,l.Wm)(j,{vertical:"",class:"q-mx-xs",style:{width:"0.5px"}}),(0,l._)("div",v,[(0,l.Wm)(Z,{flat:"",size:"sm",padding:"xs",icon:"content_copy",onClick:e.copyMarkdownToClipboard},{default:(0,l.w5)((()=>[(0,l.Wm)(U,{class:"text-no-wrap"},{default:(0,l.w5)((()=>[C])),_:1})])),_:1},8,["onClick"]),(0,l.Wm)(Z,{flat:"",size:"sm",padding:"xs",icon:"file_download",onClick:e.saveMarkdownFile,disable:!e.$store.getters["markdown/isFileNameValid"]},{default:(0,l.w5)((()=>[(0,l.Wm)(U,{class:"text-no-wrap"},{default:(0,l.w5)((()=>[W])),_:1})])),_:1},8,["onClick","disable"])]),(0,l.Wm)(j,{vertical:"",class:"q-mx-xs",style:{width:"0.5px"}}),(0,l._)("div",A,[(0,l.Wm)(Z,{flat:"",size:"sm",padding:"xs",icon:"picture_as_pdf",onClick:e.saveMarkdownAsPdf,disable:!e.$store.getters["markdown/isFileNameValid"]},{default:(0,l.w5)((()=>[(0,l.Wm)(U,{class:"text-no-wrap"},{default:(0,l.w5)((()=>[q])),_:1})])),_:1},8,["onClick","disable"]),(0,l.Wm)(Z,{flat:"",size:"sm",padding:"xs",icon:"html",onClick:e.saveMarkdownAsHtml,disable:!e.$store.getters["markdown/isFileNameValid"]},{default:(0,l.w5)((()=>[(0,l.Wm)(U,{class:"text-no-wrap"},{default:(0,l.w5)((()=>[T])),_:1})])),_:1},8,["onClick","disable"])])],2),(0,l.Wm)(I,{modelValue:e.splitterModel,"onUpdate:modelValue":[t[21]||(t[21]=t=>e.splitterModel=t),e.roundSplitterModel],limits:[25,75],class:"full-width flex row",style:{height:"88vh"},"separator-style":{width:"1px"}},{before:(0,l.w5)((()=>[(0,l.wy)((0,l._)("textarea",{ref:"editorArea",placeholder:"Texte","onUpdate:modelValue":t[15]||(t[15]=t=>e.editorText=t),class:"full-width editor q-pt-lg q-pb-lg q-pl-lg",style:{"min-height":"88.1vh"},type:"textarea",onKeydown:[t[16]||(t[16]=(0,a.D2)((0,a.iM)((t=>e.formatSelectionDouble("**")),["ctrl","prevent","stop"]),["b"])),t[17]||(t[17]=(0,a.D2)((0,a.iM)((t=>e.formatSelectionDouble("_")),["ctrl","prevent","stop"]),["i"])),t[18]||(t[18]=(0,a.D2)((0,a.iM)((t=>e.formatSelectionDouble("~~")),["ctrl","prevent","stop"]),["u"])),t[19]||(t[19]=(0,a.iM)((t=>e.handleCtrlNumberKeydown(t)),["ctrl"])),t[20]||(t[20]=(0,a.D2)((0,a.iM)(((...t)=>e.saveMarkdownFile&&e.saveMarkdownFile(...t)),["ctrl","prevent","stop"]),["s"]))]},null,544),[[a.nr,e.editorText]])])),after:(0,l.w5)((()=>[(0,l.Wm)(L,{ref:"markdownScrollArea",style:{height:"88vh",border:"1px solid rgba(0, 0, 0, 0.12)","border-left":"none !important"},visible:!1,"thumb-style":{display:"none"}},{default:(0,l.w5)((()=>[(0,l.Wm)(H,{src:e.editorText,class:"full-width full-height markdown text-left q-pt-sm q-px-lg"},null,8,["src"])])),_:1},512)])),_:1},8,["modelValue","onUpdate:modelValue"])])),_:1})}r(5363);var $=r(1959),M=r(1038),U=r(1914),Z=r(2841),j=r(6417),D=r(794),N=r(2522),Q=r(2746),V=r.n(Q);const F=(0,l.aZ)({name:"MarkdownEditor",components:{QMarkdown:M.QMarkdown},setup(){const e=(0,$.iH)(null),t=(0,$.iH)({x:2,y:2});return{splitterModel:(0,$.iH)(45),markdownScrollArea:e,insertArraySize:t}},mounted(){(0,D.Z)((()=>({title:"Notes "+(this.$store.getters["markdown/isFileNameValid"]?" | "+this.fileName:"")}))),this.$refs.editorArea.addEventListener("scroll",(e=>{this.markdownScrollArea.setScrollPosition("vertical",.995*e.target.scrollTop*this.markdownScrollArea.getScroll().verticalSize/e.target.scrollHeight)}),!0)},computed:{editorText:{get(){return this.$store.state.markdown.editorText},set(e){this.$store.commit("markdown/setEditorText",e)}},fileName(){return this.$store.state.markdown.fileName},validateArraySize(){return/^[1-9][0-9]?$/.test(this.insertArraySize.x.toString())&&/^[1-9][0-9]?$/.test(this.insertArraySize.y.toString())}},methods:{handleCtrlNumberKeydown(e){e.keyCode>=49&&e.keyCode<=54&&this.formatSelectionSimple("#".repeat(e.keyCode-48)+" ")},formatSelectionSimple(e){window.getSelection()&&(this.$refs.editorArea.focus(),N.$T(this.$refs.editorArea,e+" "+window.getSelection().toString()))},formatSelectionDouble(e){window.getSelection()&&(this.$refs.editorArea.focus(),N.Um(this.$refs.editorArea,e))},insertArray(){if(window.getSelection()&&this.validateArraySize){this.$refs.editorArea.focus();let e="\n|";for(let t=0;t<this.insertArraySize.y;t++){for(let r=0;r<this.insertArraySize.x;r++)e+=` ${t+r+1} |`;0===t&&(e+="\n|",e+="----|".repeat(this.insertArraySize.x)),t<this.insertArraySize.y-1&&(e+="\n",e+="|")}e+="\n",N.$T(this.$refs.editorArea,e)}},copyMarkdownToClipboard(){(0,U.Z)(this.editorText).then((()=>{j.Z.create({type:"positive",message:"Texte copié",timeout:400})})).catch((()=>{j.Z.create({type:"negative",message:"Le texte n'a pas pu être copié",timeout:400})}))},saveMarkdownFile(){if(!this.$store.getters["markdown/isFileNameValid"])return;const e=(0,Z.Z)(this.$store.state.markdown.fileName.replace(/[/\\?%*:|"<>]/g,"-")+".md",this.editorText);!0!==e&&j.Z.create({type:"positive",message:"Le fichier n'a pas pu être enregistré",time:400})},saveMarkdownAsHtml(){if(!this.$store.getters["markdown/isFileNameValid"])return;const e=new(V().Converter),t=e.makeHtml(this.editorText),r=(0,Z.Z)(this.$store.state.markdown.fileName.replace(/[/\\?%*:|"<>]/g,"-")+".html",t);!0!==r&&j.Z.create({type:"positive",message:"Le fichier n'a pas pu être enregistré",time:400})},saveMarkdownAsPdf(){if(!this.$store.getters["markdown/isFileNameValid"])return;const e=new(V().Converter);e.makeHtml(this.editorText)},roundSplitterModel(e){e<=47.5&&e>=42.5&&(this.splitterModel=45)}}});window.onkeydown=e=>{if(e.ctrlKey&&(49===e.keyCode||50===e.keyCode||51===e.keyCode||52===e.keyCode||53===e.keyCode||54===e.keyCode||55===e.keyCode||56===e.keyCode||57===e.keyCode))return!1};var H=r(4260),L=r(4379),I=r(2165),K=r(8870),P=r(5869),E=r(4858),O=r(7011),B=r(3414),G=r(2035),J=r(2350),R=r(218),X=r(7704),Y=r(677),ee=r(7518),te=r.n(ee);const re=(0,H.Z)(F,[["render",z]]),le=re;te()(F,"components",{QPage:L.Z,QBtn:I.Z,QTooltip:K.Z,QSeparator:P.Z,QBtnDropdown:E.Z,QList:O.Z,QItem:B.Z,QItemSection:G.Z,QItemLabel:J.Z,QSplitter:R.Z,QScrollArea:X.Z}),te()(F,"directives",{ClosePopup:Y.Z})},5240:(e,t,r)=>{var l={"./bmp":2505,"./bmp.js":2505,"./gif":518,"./gif.js":518,"./jpg":7290,"./jpg.js":7290,"./png":7362,"./png.js":7362,"./psd":6857,"./psd.js":6857,"./svg":50,"./svg.js":50,"./tiff":9146,"./tiff.js":9146,"./webp":5171,"./webp.js":5171};function i(e){var t=a(e);return r(t)}function a(e){if(!r.o(l,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return l[e]}i.keys=function(){return Object.keys(l)},i.resolve=a,e.exports=i,i.id=5240},6098:()=>{},6981:()=>{},7103:()=>{}}]);