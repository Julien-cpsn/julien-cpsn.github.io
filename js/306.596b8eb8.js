(self["webpackChunknotes"]=self["webpackChunknotes"]||[]).push([[306],{7156:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>J});l(71);var o=l(3673),i=l(2323),a=l(8880);const r={class:"q-mx-xs"},s=(0,o.Uk)("Écrire en gras"),n=(0,o.Uk)("Écrire en italique"),d=(0,o.Uk)("Souligner du texte"),m={class:"q-mx-xs"},c=(0,o.Uk)("Insérer un type de texte"),p=(0,o.Uk)("Titre 1"),u=(0,o.Uk)("Titre 2"),w=(0,o.Uk)("Titre 3"),f=(0,o.Uk)("Insérer un bloc de code"),k=(0,o.Uk)("Insérer une citation"),g={class:"q-mx-xs"},x=(0,o.Uk)("Copier"),h=(0,o.Uk)("Télécharger le fichier"),_=(0,o.Uk)("Importer un fichier"),b={class:"q-mx-xs"},v=(0,o.Uk)("Télécharger au format PDF"),y=(0,o.Uk)("Télécharger au format HTML");function C(e,t,l,C,S,W){const q=(0,o.up)("q-tooltip"),M=(0,o.up)("q-btn"),T=(0,o.up)("q-separator"),Z=(0,o.up)("q-item-label"),U=(0,o.up)("q-item-section"),N=(0,o.up)("q-item"),D=(0,o.up)("q-list"),j=(0,o.up)("q-btn-dropdown"),Q=(0,o.up)("q-markdown"),$=(0,o.up)("q-scroll-area"),z=(0,o.up)("q-splitter"),F=(0,o.up)("q-page"),A=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.j4)(F,{class:"flex column"},{default:(0,o.w5)((()=>[(0,o._)("div",{class:(0,i.C_)(["full-width flex row items-center q-py-xs q-px-sm",e.$q.dark.isActive?"bg-grey-10":"bg-grey-2"]),style:{height:"5vh"}},[(0,o._)("div",r,[(0,o.Wm)(M,{flat:"",size:"sm",padding:"xs",icon:"format_bold",onClick:t[0]||(t[0]=t=>e.formatSelectionDouble("**"))},{default:(0,o.w5)((()=>[(0,o.Wm)(q,{class:"text-no-wrap"},{default:(0,o.w5)((()=>[s])),_:1})])),_:1}),(0,o.Wm)(M,{flat:"",size:"sm",padding:"xs",icon:"format_italic",onClick:t[1]||(t[1]=t=>e.formatSelectionDouble("_"))},{default:(0,o.w5)((()=>[(0,o.Wm)(q,{class:"text-no-wrap"},{default:(0,o.w5)((()=>[n])),_:1})])),_:1}),(0,o.Wm)(M,{flat:"",size:"sm",padding:"xs",icon:"format_underline",onClick:t[2]||(t[2]=t=>e.formatSelectionDouble("~~"))},{default:(0,o.w5)((()=>[(0,o.Wm)(q,{class:"text-no-wrap"},{default:(0,o.w5)((()=>[d])),_:1})])),_:1})]),(0,o.Wm)(T,{vertical:"",class:"q-mx-xs",style:{width:"0.5px"}}),(0,o._)("div",m,[(0,o.Wm)(j,{flat:"",size:"sm",padding:"xs",icon:"format_size","no-caps":""},{label:(0,o.w5)((()=>[(0,o.Wm)(q,{class:"text-no-wrap"},{default:(0,o.w5)((()=>[c])),_:1})])),default:(0,o.w5)((()=>[(0,o.Wm)(D,null,{default:(0,o.w5)((()=>[(0,o.wy)(((0,o.wg)(),(0,o.j4)(N,{clickable:"",onClick:t[3]||(t[3]=t=>e.formatSelectionSimple("#"))},{default:(0,o.w5)((()=>[(0,o.Wm)(U,null,{default:(0,o.w5)((()=>[(0,o.Wm)(Z,{class:"text-h5"},{default:(0,o.w5)((()=>[p])),_:1})])),_:1})])),_:1})),[[A]]),(0,o.wy)(((0,o.wg)(),(0,o.j4)(N,{clickable:"",onClick:t[4]||(t[4]=t=>e.formatSelectionSimple("##"))},{default:(0,o.w5)((()=>[(0,o.Wm)(U,null,{default:(0,o.w5)((()=>[(0,o.Wm)(Z,{class:"text-h6"},{default:(0,o.w5)((()=>[u])),_:1})])),_:1})])),_:1})),[[A]]),(0,o.wy)(((0,o.wg)(),(0,o.j4)(N,{clickable:"",onClick:t[5]||(t[5]=t=>e.formatSelectionSimple("###"))},{default:(0,o.w5)((()=>[(0,o.Wm)(U,null,{default:(0,o.w5)((()=>[(0,o.Wm)(Z,{class:"text-subtitle2"},{default:(0,o.w5)((()=>[w])),_:1})])),_:1})])),_:1})),[[A]])])),_:1})])),_:1}),(0,o.Wm)(M,{flat:"",size:"sm",padding:"xs",icon:"code",onClick:t[6]||(t[6]=t=>e.formatSelectionDouble("\n```\n"))},{default:(0,o.w5)((()=>[(0,o.Wm)(q,{class:"text-no-wrap"},{default:(0,o.w5)((()=>[f])),_:1})])),_:1}),(0,o.Wm)(M,{flat:"",size:"sm",padding:"xs",icon:"format_quote",onClick:t[7]||(t[7]=t=>e.formatSelectionSimple(">"))},{default:(0,o.w5)((()=>[(0,o.Wm)(q,{class:"text-no-wrap"},{default:(0,o.w5)((()=>[k])),_:1})])),_:1})]),(0,o.Wm)(T,{vertical:"",class:"q-mx-xs",style:{width:"0.5px"}}),(0,o._)("div",g,[(0,o.Wm)(M,{flat:"",size:"sm",padding:"xs",icon:"content_copy",onClick:e.copyMarkdownToClipboard},{default:(0,o.w5)((()=>[(0,o.Wm)(q,null,{default:(0,o.w5)((()=>[x])),_:1})])),_:1},8,["onClick"]),(0,o.Wm)(M,{flat:"",size:"sm",padding:"xs",icon:"file_download",onClick:e.saveMarkdownFile,disable:!e.$store.getters["markdown/isFileNameValid"]},{default:(0,o.w5)((()=>[(0,o.Wm)(q,{class:"text-no-wrap"},{default:(0,o.w5)((()=>[h])),_:1})])),_:1},8,["onClick","disable"]),(0,o.Wm)(M,{flat:"",size:"sm",padding:"xs",icon:"file_upload"},{default:(0,o.w5)((()=>[(0,o.Wm)(q,null,{default:(0,o.w5)((()=>[_])),_:1})])),_:1})]),(0,o.Wm)(T,{vertical:"",class:"q-mx-xs",style:{width:"0.5px"}}),(0,o._)("div",b,[(0,o.Wm)(M,{flat:"",size:"sm",padding:"xs",icon:"picture_as_pdf",onClick:e.saveMarkdownAsPdf,disable:!e.$store.getters["markdown/isFileNameValid"]},{default:(0,o.w5)((()=>[(0,o.Wm)(q,null,{default:(0,o.w5)((()=>[v])),_:1})])),_:1},8,["onClick","disable"]),(0,o.Wm)(M,{flat:"",size:"sm",padding:"xs",icon:"html",onClick:e.saveMarkdownAsHtml,disable:!e.$store.getters["markdown/isFileNameValid"]},{default:(0,o.w5)((()=>[(0,o.Wm)(q,null,{default:(0,o.w5)((()=>[y])),_:1})])),_:1},8,["onClick","disable"])])],2),(0,o.Wm)(z,{modelValue:e.splitterModel,"onUpdate:modelValue":[t[14]||(t[14]=t=>e.splitterModel=t),e.roundSplitterModel],limits:[25,75],class:"full-width flex row",style:{height:"88vh"},"separator-style":{width:"1px"}},{before:(0,o.w5)((()=>[(0,o.wy)((0,o._)("textarea",{ref:"editorArea",placeholder:"Texte","onUpdate:modelValue":t[8]||(t[8]=t=>e.editorText=t),class:"full-width editor q-pt-lg q-pb-lg q-pl-lg",style:{"min-height":"88.1vh"},type:"textarea",onKeydown:[t[9]||(t[9]=(0,a.D2)((0,a.iM)((t=>e.formatSelectionDouble("**")),["ctrl","prevent","stop"]),["b"])),t[10]||(t[10]=(0,a.D2)((0,a.iM)((t=>e.formatSelectionDouble("_")),["ctrl","prevent","stop"]),["i"])),t[11]||(t[11]=(0,a.D2)((0,a.iM)((t=>e.formatSelectionDouble("~~")),["ctrl","prevent","stop"]),["u"])),t[12]||(t[12]=(0,a.iM)((t=>e.handleCtrlNumberKeydown(t)),["ctrl"])),t[13]||(t[13]=(0,a.D2)((0,a.iM)(((...t)=>e.saveMarkdownFile&&e.saveMarkdownFile(...t)),["ctrl","prevent","stop"]),["s"]))]},null,544),[[a.nr,e.editorText]])])),after:(0,o.w5)((()=>[(0,o.Wm)($,{ref:"markdownScrollArea",style:{height:"88vh",border:"1px solid rgba(0, 0, 0, 0.12)","border-left":"none !important"},visible:!1,"thumb-style":{display:"none"}},{default:(0,o.w5)((()=>[(0,o.Wm)(Q,{src:e.editorText,class:"full-width full-height markdown text-left q-pt-sm q-px-lg"},null,8,["src"])])),_:1},512)])),_:1},8,["modelValue","onUpdate:modelValue"])])),_:1})}var S=l(1959),W=l(1038),q=l(1914),M=l(2841),T=l(6417),Z=l(794),U=l(2746),N=l.n(U);const D=(0,o.aZ)({name:"MarkdownEditor",components:{QMarkdown:W.QMarkdown},setup(){const e=(0,S.iH)(null);return{splitterModel:(0,S.iH)(45),markdownScrollArea:e}},mounted(){this.$refs.editorArea.addEventListener("scroll",(e=>{this.markdownScrollArea.setScrollPosition("vertical",.995*e.target.scrollTop*this.markdownScrollArea.getScroll().verticalSize/e.target.scrollHeight)}),!0),(0,Z.Z)((()=>({title:"Notes "+(this.$store.getters["markdown/isFileNameValid"]?" | "+this.fileName:"")})))},computed:{editorText:{get(){return this.$store.state.markdown.editorText},set(e){this.$store.commit("markdown/setEditorText",e)}},fileName(){return this.$store.state.markdown.fileName}},methods:{handleCtrlNumberKeydown(e){e.keyCode>=49&&e.keyCode<=54&&this.formatSelectionSimple("#".repeat(e.keyCode-48)+" ")},formatSelectionSimple(e){window.getSelection()&&document.execCommand("insertText",!1,e+" "+window.getSelection().toString())},formatSelectionDouble(e){window.getSelection()&&document.execCommand("insertText",!1,e+window.getSelection().toString()+e)},copyMarkdownToClipboard(){(0,q.Z)(this.editorText).then((()=>{T.Z.create({type:"positive",message:"Texte copié",timeout:400})})).catch((()=>{T.Z.create({type:"negative",message:"Le texte n'a pas pu être copié",timeout:400})}))},saveMarkdownFile(){if(!this.$store.getters["markdown/isFileNameValid"])return;const e=(0,M.Z)(this.$store.state.markdown.fileName+".md",this.editorText);!0!==e&&T.Z.create({type:"positive",message:"Le fichier n'a pas pu être enregistré",time:400})},saveMarkdownAsHtml(){if(!this.$store.getters["markdown/isFileNameValid"])return;const e=new(N().Converter),t=e.makeHtml(this.editorText),l=(0,M.Z)(this.$store.state.markdown.fileName+".html",t);!0!==l&&T.Z.create({type:"positive",message:"Le fichier n'a pas pu être enregistré",time:400})},saveMarkdownAsPdf(){if(!this.$store.getters["markdown/isFileNameValid"])return;const e=new(N().Converter);e.makeHtml(this.editorText)},roundSplitterModel(e){e<=47.5&&e>=42.5&&(this.splitterModel=45)}}});window.onkeydown=e=>{if(e.ctrlKey&&(49===e.keyCode||50===e.keyCode||51===e.keyCode||52===e.keyCode||53===e.keyCode||54===e.keyCode||55===e.keyCode||56===e.keyCode||57===e.keyCode))return!1};var j=l(4260),Q=l(4379),$=l(2165),z=l(8870),F=l(5869),A=l(4858),V=l(7011),H=l(3414),L=l(2035),I=l(2350),P=l(218),E=l(7704),K=l(677),O=l(7518),B=l.n(O);const G=(0,j.Z)(D,[["render",C]]),J=G;B()(D,"components",{QPage:Q.Z,QBtn:$.Z,QTooltip:z.Z,QSeparator:F.Z,QBtnDropdown:A.Z,QList:V.Z,QItem:H.Z,QItemSection:L.Z,QItemLabel:I.Z,QSplitter:P.Z,QScrollArea:E.Z}),B()(D,"directives",{ClosePopup:K.Z})},5240:(e,t,l)=>{var o={"./bmp":2505,"./bmp.js":2505,"./gif":518,"./gif.js":518,"./jpg":7290,"./jpg.js":7290,"./png":7362,"./png.js":7362,"./psd":6857,"./psd.js":6857,"./svg":50,"./svg.js":50,"./tiff":9146,"./tiff.js":9146,"./webp":5171,"./webp.js":5171};function i(e){var t=a(e);return l(t)}function a(e){if(!l.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}i.keys=function(){return Object.keys(o)},i.resolve=a,e.exports=i,i.id=5240},6098:()=>{},6981:()=>{},7103:()=>{}}]);